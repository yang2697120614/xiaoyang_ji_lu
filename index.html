<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>药物用量日历</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#60a5fa',
                        accent: '#f97316',
                        neutral: '#f1f5f9',
                        'neutral-dark': '#94a3b8',
                        'neutral-darker': '#64748b'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                        'card-hover': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .glass-effect {
                @apply bg-white bg-opacity-80 backdrop-blur-md;
            }
            .card-transition {
                @apply transition-all duration-300 ease-in-out;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .btn-primary {
                @apply bg-primary hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50;
            }
            .btn-secondary {
                @apply bg-white hover:bg-gray-100 text-gray-800 font-medium py-2 px-4 border border-gray-200 rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-opacity-50;
            }
            .input-field {
                @apply bg-white border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors duration-300;
            }
            .calendar-day {
                @apply aspect-square flex flex items-center justify-center rounded-lg transition-all duration-300 cursor-pointer hover:bg-blue-50;
            }
            .calendar-day-active {
                @apply bg-primary text-white hover:bg-blue-600;
            }
            .calendar-day-taken {
                @apply bg-green-100 text-green-800;
            }
            .calendar-day-future {
                @apply text-gray-400;
            }
            .calendar-day-weekend {
                @apply text-red-500;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen font-sans text-gray-800">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- 头部 -->
        <header class="text-center mb-8">
            <h1 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-primary mb-2 text-shadow">药物用量日历</h1>
            <p class="text-gray-600 max-w-md mx-auto">轻松管理您的每日药物用量，支持循环用药方案</p>
        </header>

        <!-- 主内容区 -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- 左侧：设置面板 -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-card p-6 card-transition hover:shadow-card-hover">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fa fa-sliders mr-2 text-primary"></i>用量设置
                    </h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label for="dosage1" class="block text-sm font-medium text-gray-700 mb-1">用量 A</label>
                            <div class="flex items-center">
                                <input type="number" id="dosage1" step="0.25" min="0" value="1.5" 
                                    class="input-field flex-1">
                                <span class="ml-2 text-gray-500">片</span>
                            </div>
                        </div>
                        
                        <div>
                            <label for="dosage2" class="block text-sm font-medium text-gray-700 mb-1">用量 B</label>
                            <div class="flex items-center">
                                <input type="number" id="dosage2" step="0.25" min="0" value="1.75" 
                                    class="input-field flex-1">
                                <span class="ml-2 text-gray-500">片</span>
                            </div>
                        </div>
                        
                        <div>
                            <label for="startDate" class="block text-sm font-medium text-gray-700 mb-1">开始日期</label>
                            <input type="date" id="startDate" class="input-field w-full">
                        </div>
                        
                        <div class="pt-2">
                            <button id="saveSettings" class="btn-primary w-full flex items-center justify-center">
                                <i class="fa fa-save mr-2"></i>保存设置
                            </button>
                        </div>
                    </div>
                    
                    <hr class="my-6 border-gray-200">
                    
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fa fa-history mr-2 text-primary"></i>使用记录
                    </h2>
                    
                    <div class="space-y-3 max-h-64 overflow-y-auto pr-2">
                        <div id="historyList" class="text-sm text-gray-600">
                            <!-- 历史记录将通过JavaScript动态添加 -->
                            <div class="text-center text-gray-400 italic py-4">暂无记录</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 中间和右侧：日历和统计 -->
            <div class="lg:col-span-2 space-y-6">
                <!-- 今日用量 -->
                <div class="bg-white rounded-xl shadow-card p-6 card-transition hover:shadow-card-hover">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fa fa-calendar-check-o mr-2 text-primary"></i>今日用量
                    </h2>
                    
                    <div class="flex flex-col md:flex-row items-center justify-between">
                        <div class="text-center md:text-left mb-4 md:mb-0">
                            <p class="text-gray-500" id="todayDate"></p>
                            <p class="text-5xl font-bold text-primary mt-2" id="todayDosage">1.5 <span class="text-2xl font-normal text-gray-600">片</span></p>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button id="markTaken" class="btn-primary flex items-center">
                                <i class="fa fa-check mr-2"></i>已服用
                            </button>
                            <button id="skipDay" class="btn-secondary flex items-center">
                                <i class="fa fa-forward mr-2"></i>跳过今日
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 日历视图 -->
                <div class="bg-white rounded-xl shadow-card p-6 card-transition hover:shadow-card-hover">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold flex items-center">
                            <i class="fa fa-calendar mr-2 text-primary"></i>
                            <span id="currentMonth">2023年11月</span>
                        </h2>
                        
                        <div class="flex space-x-2">
                            <button id="prevMonth" class="btn-secondary py-1 px-3">
                                <i class="fa fa-chevron-left"></i>
                            </button>
                            <button id="nextMonth" class="btn-secondary py-1 px-3">
                                <i class="fa fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 星期标题 -->
                    <div class="grid grid-cols-7 gap-1 mb-2">
                        <div class="text-center text-sm font-medium text-gray-500">日</div>
                        <div class="text-center text-sm font-medium text-gray-500">一</div>
                        <div class="text-center text-sm font-medium text-gray-500">二</div>
                        <div class="text-center text-sm font-medium text-gray-500">三</div>
                        <div class="text-center text-sm font-medium text-gray-500">四</div>
                        <div class="text-center text-sm font-medium text-gray-500">五</div>
                        <div class="text-center text-sm font-medium text-gray-500">六</div>
                    </div>
                    
                    <!-- 日历网格 -->
                    <div id="calendarGrid" class="grid grid-cols-7 gap-1">
                        <!-- 日历天数将通过JavaScript动态添加 -->
                    </div>
                </div>
                
                <!-- 用量统计 -->
                <div class="bg-white rounded-xl shadow-card p-6 card-transition hover:shadow-card-hover">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fa fa-bar-chart mr-2 text-primary"></i>用量统计
                    </h2>
                    
                    <div class="h-64">
                        <canvas id="dosageChart"></canvas>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- 页脚 -->
        <footer class="mt-12 text-center text-gray-500 text-sm">
            <p>© 2025 药物用量日历 | 设计与开发</p>
        </footer>
    </div>
    
    <!-- 提示框 -->
    <div id="toast" class="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center">
        <i class="fa fa-check-circle mr-2"></i>
        <span id="toastMessage"></span>
    </div>

    <script>
        // 全局变量
        let settings = {
            dosage1: 1.5,
            dosage2: 1.75,
            startDate: new Date(),
            cycleType: 'alternating' // 'alternating' 或 'custom'
        };
        
        let history = [];
        let currentDate = new Date();
        let calendarChart = null;
        
        // DOM元素
        const dosage1Input = document.getElementById('dosage1');
        const dosage2Input = document.getElementById('dosage2');
        const startDateInput = document.getElementById('startDate');
        const saveSettingsBtn = document.getElementById('saveSettings');
        const todayDateEl = document.getElementById('todayDate');
        const todayDosageEl = document.getElementById('todayDosage');
        const markTakenBtn = document.getElementById('markTaken');
        const skipDayBtn = document.getElementById('skipDay');
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');
        const currentMonthEl = document.getElementById('currentMonth');
        const calendarGridEl = document.getElementById('calendarGrid');
        const historyListEl = document.getElementById('historyList');
        const toastEl = document.getElementById('toast');
        const toastMessageEl = document.getElementById('toastMessage');
        
        // 初始化
        function init() {
            // 从本地存储加载数据
            loadData();
            
            // 设置UI初始值
            dosage1Input.value = settings.dosage1;
            dosage2Input.value = settings.dosage2;
            startDateInput.value = formatDateForInput(settings.startDate);
            
            // 更新今日用量显示
            updateTodayDosage();
            
            // 渲染日历
            renderCalendar(currentDate);
            
            // 更新历史记录
            updateHistoryList();
            
            // 初始化图表
            initChart();
            
            // 添加事件监听器
            addEventListeners();
        }
        
        // 从本地存储加载数据
        function loadData() {
            const savedSettings = localStorage.getItem('medicationSettings');
            const savedHistory = localStorage.getItem('medicationHistory');
            
            if (savedSettings) {
                const parsedSettings = JSON.parse(savedSettings);
                settings = {
                    ...settings,
                    ...parsedSettings,
                    startDate: new Date(parsedSettings.startDate)
                };
            }
            
            if (savedHistory) {
                history = JSON.parse(savedHistory);
            }
        }
        
        // 保存数据到本地存储
        function saveData() {
            localStorage.setItem('medicationSettings', JSON.stringify({
                ...settings,
                startDate: settings.startDate.toISOString()
            }));
            localStorage.setItem('medicationHistory', JSON.stringify(history));
        }
        
        // 格式化日期为输入框格式 (YYYY-MM-DD)
        function formatDateForInput(date) {
            return date.toISOString().split('T')[0];
        }
        
        // 计算指定日期的用量
        function calculateDosageForDate(date) {
            // 计算从开始日期到指定日期的天数差
            const timeDiff = date.getTime() - settings.startDate.getTime();
            const dayDiff = Math.floor(timeDiff / (1000 * 3600 * 24));
            
            // 如果是开始日期之前，返回0
            if (dayDiff < 0) return 0;
            
            // 交替使用两个用量
            return dayDiff % 2 === 0 ? settings.dosage1 : settings.dosage2;
        }
        
        // 更新今日用量显示
        function updateTodayDosage() {
            const today = new Date();
            todayDateEl.textContent = today.toLocaleDateString('zh-CN', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            });
            
            const todayDosage = calculateDosageForDate(today);
            todayDosageEl.innerHTML = `${todayDosage} <span class="text-2xl font-normal text-gray-600">片</span>`;
            
            // 检查今天是否已经标记为已服用
            const todayStr = formatDateForInput(today);
            const todayRecord = history.find(record => record.date === todayStr);
            
            if (todayRecord && todayRecord.taken) {
                markTakenBtn.disabled = true;
                markTakenBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                markTakenBtn.disabled = false;
                markTakenBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }
        
        // 渲染日历
        function renderCalendar(date) {
            const year = date.getFullYear();
            const month = date.getMonth();
            
            // 更新当前月份显示
            currentMonthEl.textContent = `${year}年${month + 1}月`;
            
            // 清空日历网格
            calendarGridEl.innerHTML = '';
            
            // 获取当月第一天
            const firstDay = new Date(year, month, 1);
            // 获取当月最后一天
            const lastDay = new Date(year, month + 1, 0);
            
            // 获取当月第一天是星期几 (0-6, 0是星期日)
            const firstDayOfWeek = firstDay.getDay();
            
            // 添加上个月的最后几天
            for (let i = 0; i < firstDayOfWeek; i++) {
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day text-gray-300';
                const prevMonthLastDay = new Date(year, month, 0).getDate();
                dayEl.textContent = prevMonthLastDay - (firstDayOfWeek - i - 1);
                calendarGridEl.appendChild(dayEl);
            }
            
            // 添加当月的天数
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            for (let i = 1; i <= lastDay.getDate(); i++) {
                const currentDate = new Date(year, month, i);
                const currentDateStr = formatDateForInput(currentDate);
                
                // 检查这一天是否已经记录
                const dayRecord = history.find(record => record.date === currentDateStr);
                
                // 创建日历天数元素
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                
                // 添加日期数字
                const dateNumber = document.createElement('div');
                dateNumber.className = 'text-lg font-medium';
                dateNumber.textContent = i;
                
                // 添加用量显示
                const dosageEl = document.createElement('div');
                dosageEl.className = 'text-xs text-gray-500 mt-1';
                
                // 计算当天用量
                const dayDosage = calculateDosageForDate(currentDate);
                dosageEl.textContent = `${dayDosage}片`;
                
                // 组合元素
                dayEl.appendChild(dateNumber);
                dayEl.appendChild(dosageEl);
                
                // 添加样式
                if (currentDate.getTime() === today.getTime()) {
                    dayEl.classList.add('calendar-day-active');
                } else if (currentDate < today) {
                    if (dayRecord && dayRecord.taken) {
                        dayEl.classList.add('calendar-day-taken');
                    }
                } else {
                    dayEl.classList.add('calendar-day-future');
                }
                
                // 周末样式
                const dayOfWeek = currentDate.getDay();
                if (dayOfWeek === 0 || dayOfWeek === 6) {
                    dayEl.classList.add('calendar-day-weekend');
                }
                
                // 添加点击事件
                dayEl.addEventListener('click', () => showDayDetails(currentDate));
                
                // 添加到日历网格
                calendarGridEl.appendChild(dayEl);
            }
            
            // 更新图表
            updateChart(year, month);
        }
        
        // 显示日期详情
        function showDayDetails(date) {
            const dateStr = formatDateForInput(date);
            const dateDosage = calculateDosageForDate(date);
            const dayRecord = history.find(record => record.date === dateStr);
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            let message = `${date.toLocaleDateString('zh-CN', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            })}`;
            
            message += `\n用量: ${dateDosage}片`;
            
            if (dayRecord) {
                message += dayRecord.taken ? '\n状态: 已服用' : '\n状态: 已跳过';
            } else {
                message += '\n状态: 未记录';
            }
            
            // 如果是今天或之前的日期，可以标记为已服用
            if (date <= today && (!dayRecord || !dayRecord.taken)) {
                if (confirm(`${message}\n\n是否标记为已服用?`)) {
                    markDayAsTaken(date);
                }
            } else {
                alert(message);
            }
        }
        
        // 标记日期为已服用
        function markDayAsTaken(date) {
            const dateStr = formatDateForInput(date);
            const dosage = calculateDosageForDate(date);
            
            // 检查是否已有记录
            const existingIndex = history.findIndex(record => record.date === dateStr);
            
            if (existingIndex >= 0) {
                // 更新现有记录
                history[existingIndex] = {
                    date: dateStr,
                    dosage: dosage,
                    taken: true,
                    timestamp: new Date().toISOString()
                };
            } else {
                // 添加新记录
                history.push({
                    date: dateStr,
                    dosage: dosage,
                    taken: true,
                    timestamp: new Date().toISOString()
                });
            }
            
            // 保存数据
            saveData();
            
            // 更新UI
            updateTodayDosage();
            renderCalendar(currentDate);
            updateHistoryList();
            
            // 显示提示
            showToast('已标记为已服用');
        }
        
        // 跳过今日
        function skipToday() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const dateStr = formatDateForInput(today);
            
            // 检查是否已有记录
            const existingIndex = history.findIndex(record => record.date === dateStr);
            
            if (existingIndex >= 0) {
                // 更新现有记录
                history[existingIndex] = {
                    date: dateStr,
                    dosage: calculateDosageForDate(today),
                    taken: false,
                    timestamp: new Date().toISOString()
                };
            } else {
                // 添加新记录
                history.push({
                    date: dateStr,
                    dosage: calculateDosageForDate(today),
                    taken: false,
                    timestamp: new Date().toISOString()
                });
            }
            
            // 保存数据
            saveData();
            
            // 更新UI
            updateTodayDosage();
            renderCalendar(currentDate);
            updateHistoryList();
            
            // 显示提示
            showToast('已跳过今日');
        }
        
        // 更新历史记录列表
        function updateHistoryList() {
            // 按日期降序排序
            const sortedHistory = [...history].sort((a, b) => 
                new Date(b.date) - new Date(a.date)
            );
            
            if (sortedHistory.length === 0) {
                historyListEl.innerHTML = '<div class="text-center text-gray-400 italic py-4">暂无记录</div>';
                return;
            }
            
            historyListEl.innerHTML = '';
            
            // 只显示最近的10条记录
            const recentHistory = sortedHistory.slice(0, 10);
            
            recentHistory.forEach(record => {
                const date = new Date(record.date);
                const dateStr = date.toLocaleDateString('zh-CN', {
                    month: 'short',
                    day: 'numeric',
                    weekday: 'short'
                });
                
                const historyItem = document.createElement('div');
                historyItem.className = 'flex justify-between items-center p-2 rounded-lg hover:bg-gray-50';
                
                const leftDiv = document.createElement('div');
                leftDiv.innerHTML = `
                    <div class="font-medium">${dateStr}</div>
                    <div class="text-xs text-gray-500">${record.dosage}片</div>
                `;
                
                const rightDiv = document.createElement('div');
                rightDiv.className = record.taken 
                    ? 'text-green-500 flex items-center' 
                    : 'text-red-500 flex items-center';
                
                rightDiv.innerHTML = `
                    <i class="fa ${record.taken ? 'fa-check-circle' : 'fa-times-circle'} mr-1"></i>
                    <span>${record.taken ? '已服用' : '已跳过'}</span>
                `;
                
                historyItem.appendChild(leftDiv);
                historyItem.appendChild(rightDiv);
                historyListEl.appendChild(historyItem);
            });
        }
        
        // 初始化图表
        function initChart() {
            const ctx = document.getElementById('dosageChart').getContext('2d');
            
            calendarChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: [
                        {
                            label: '计划用量',
                            data: [],
                            backgroundColor: 'rgba(59, 130, 246, 0.5)',
                            borderColor: 'rgba(59, 130, 246, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '实际服用',
                            data: [],
                            backgroundColor: 'rgba(34, 197, 94, 0.5)',
                            borderColor: 'rgba(34, 197, 94, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '用量 (片)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '日期'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        },
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }
        
        // 更新图表
        function updateChart(year, month) {
            // 获取当月第一天和最后一天
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            
            // 准备数据
            const labels = [];
            const plannedData = [];
            const actualData = [];
            
            // 遍历当月每一天
            for (let i = 1; i <= lastDay.getDate(); i++) {
                const date = new Date(year, month, i);
                const dateStr = formatDateForInput(date);
                
                // 添加标签 (显示日期)
                labels.push(i);
                
                // 计算计划用量
                const plannedDosage = calculateDosageForDate(date);
                plannedData.push(plannedDosage);
                
                // 查找实际服用记录
                const dayRecord = history.find(record => record.date === dateStr);
                actualData.push(dayRecord && dayRecord.taken ? plannedDosage : 0);
            }
            
            // 更新图表数据
            calendarChart.data.labels = labels;
            calendarChart.data.datasets[0].data = plannedData;
            calendarChart.data.datasets[1].data = actualData;
            
            // 更新图表
            calendarChart.update();
        }
        
        // 显示提示框
        function showToast(message) {
            toastMessageEl.textContent = message;
            toastEl.classList.remove('translate-y-20', 'opacity-0');
            
            setTimeout(() => {
                toastEl.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }
        
        // 添加事件监听器
        function addEventListeners() {
            // 保存设置按钮
            saveSettingsBtn.addEventListener('click', () => {
                // 获取输入值
                const dosage1 = parseFloat(dosage1Input.value);
                const dosage2 = parseFloat(dosage2Input.value);
                const startDate = new Date(startDateInput.value);
                
                // 验证输入
                if (isNaN(dosage1) || dosage1 < 0) {
                    alert('请输入有效的用量 A');
                    return;
                }
                
                if (isNaN(dosage2) || dosage2 < 0) {
                    alert('请输入有效的用量 B');
                    return;
                }
                
                if (isNaN(startDate.getTime())) {
                    alert('请选择有效的开始日期');
                    return;
                }
                
                // 更新设置
                settings.dosage1 = dosage1;
                settings.dosage2 = dosage2;
                settings.startDate = startDate;
                
                // 保存数据
                saveData();
                
                // 更新UI
                updateTodayDosage();
                renderCalendar(currentDate);
                
                // 显示提示
                showToast('设置已保存');
            });
            
            // 标记为已服用按钮
            markTakenBtn.addEventListener('click', () => {
                markDayAsTaken(new Date());
            });
            
            // 跳过今日按钮
            skipDayBtn.addEventListener('click', skipToday);
            
            // 上个月按钮
            prevMonthBtn.addEventListener('click', () => {
                currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1);
                renderCalendar(currentDate);
            });
            
            // 下个月按钮
            nextMonthBtn.addEventListener('click', () => {
                currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1);
                renderCalendar(currentDate);
            });
            
            // 窗口大小变化时重新渲染日历
            window.addEventListener('resize', () => {
                renderCalendar(currentDate);
            });
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
